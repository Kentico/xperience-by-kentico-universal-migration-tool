System.register(["react","@kentico/xperience-admin-components"],(function(e,t){var n={},r={};return{setters:[function(e){n.default=e.default,n.useEffect=e.useEffect,n.useState=e.useState},function(e){r.ActionTile=e.ActionTile,r.ActionTileType=e.ActionTileType,r.Box=e.Box,r.Button=e.Button,r.ButtonColor=e.ButtonColor,r.ButtonSize=e.ButtonSize,r.ButtonType=e.ButtonType,r.Callout=e.Callout,r.CalloutPlacementType=e.CalloutPlacementType,r.CalloutType=e.CalloutType,r.Cols=e.Cols,r.Column=e.Column,r.Headline=e.Headline,r.HeadlineSize=e.HeadlineSize,r.LayoutAlignment=e.LayoutAlignment,r.LinkButton=e.LinkButton,r.Row=e.Row,r.Spacing=e.Spacing,r.Stack=e.Stack,r.UploadTile=e.UploadTile,r.UploadTileSize=e.UploadTileSize}],execute:function(){e((()=>{var e={890:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(81),a=n.n(r),o=n(645),l=n.n(o)()(a());l.push([e.id,"#upload > div {\r\n    width: 280px;\r\n    height: 120px;\r\n}\r\n\r\n.import-button {\r\n    margin-top: 10px;\r\n    margin-left: auto;\r\n    margin-right: auto;\r\n}\r\n\r\n.content-container {\r\n    margin-left: -60px;\r\n    margin-top: -40px;\r\n}\r\n\r\n.import-log-table > * > td {\r\n    padding: 0 12px 0 0;\r\n}\r\n\r\n.clickable-text label {\r\n    font-weight: bold;\r\n    cursor: pointer;\r\n}\r\n\r\n.fade-in {\r\n    visibility: visible;\r\n    opacity: 1;\r\n    transition: opacity 0.5s linear;\r\n}\r\n\r\n.fade-out {\r\n    visibility: hidden;\r\n    opacity: 0;\r\n    transition: visibility 0s 0.5s, opacity 0.5s linear;\r\n}\r\n\r\n.start-again-button {\r\n    margin-top: 10px\r\n}\r\n\r\n/*@keyframes buttonTransition {\r\n    \r\n    to {\r\n        r: 10;\r\n    }\r\n}\r\n\r\n.progress-circle {\r\n    animation-duration: 1s;\r\n    animation-iteration-count: infinite;\r\n    animation-name: buttonTransition;\r\n}*/",""]);const s=l},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,a,o){"string"==typeof e&&(e=[[null,e,void 0]]);var l={};if(r)for(var s=0;s<this.length;s++){var i=this[s][0];null!=i&&(l[i]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);r&&l[u[0]]||(void 0!==o&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=o),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),a&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=a):u[4]="".concat(a)),t.push(u))}},t}},81:e=>{"use strict";e.exports=function(e){return e[1]}},379:e=>{"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var o={},l=[],s=0;s<e.length;s++){var i=e[s],c=r.base?i[0]+r.base:i[0],u=o[c]||0,d="".concat(c," ").concat(u);o[c]=u+1;var p=n(d),m={css:i[1],media:i[2],sourceMap:i[3],supports:i[4],layer:i[5]};if(-1!==p)t[p].references++,t[p].updater(m);else{var f=a(m,r);r.byIndex=s,t.splice(s,0,{identifier:d,updater:f,references:1})}l.push(d)}return l}function a(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,a){var o=r(e=e||[],a=a||{});return function(e){e=e||[];for(var l=0;l<o.length;l++){var s=n(o[l]);t[s].references--}for(var i=r(e,a),c=0;c<o.length;c++){var u=n(o[c]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}o=i}}},569:e=>{"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var a=void 0!==n.layer;a&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,a&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},722:(e,t,n)=>{const r=n(905).R;t.s=function(e){if(e||(e=1),!n.y.meta||!n.y.meta.url)throw console.error("__system_context__",n.y),Error("systemjs-webpack-interop was provided an unknown SystemJS context. Expected context.meta.url, but none was provided");n.p=r(n.y.meta.url,e)}},905:(e,t,n)=>{t.R=function(e,t){var n=document.createElement("a");n.href=e;for(var r="/"===n.pathname[0]?n.pathname:"/"+n.pathname,a=0,o=r.length;a!==t&&o>=0;)"/"===r[--o]&&a++;if(a!==t)throw Error("systemjs-webpack-interop: rootDirectoryLevel ("+t+") is greater than the number of directories ("+a+") in the URL path "+e);var l=r.slice(0,o+1);return n.protocol+"//"+n.host+l};Number.isInteger},271:e=>{"use strict";e.exports=r},954:e=>{"use strict";e.exports=n}},a={};function o(t){var n=a[t];if(void 0!==n)return n.exports;var r=a[t]={id:t,exports:{}};return e[t](r,r.exports,o),r.exports}o.y=t,o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.p="",o.nc=void 0;var l={};return(0,o(722).s)(1),(()=>{"use strict";o.r(l),o.d(l,{CustomLayoutTemplate:()=>P});var e=o(954),t=o(271),n=o(379),r=o.n(n),a=o(795),s=o.n(a),i=o(569),c=o.n(i),u=o(565),d=o.n(u),p=o(216),m=o.n(p),f=o(589),g=o.n(f),y=o(890),h={};h.styleTagTransform=g(),h.setAttributes=d(),h.insert=c().bind(null,"head"),h.domAPI=s(),h.insertStyleElement=m(),r()(y.Z,h),y.Z&&y.Z.locals&&y.Z.locals;const b=t=>e.default.createElement("div",{style:{backgroundImage:"url(/assets/img/admin/umt-web-admin/background.png)",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center",height:450,display:"flex",justifyContent:"center",alignItems:"center"}},t.children);let v=function(e){return e[e.None=0]="None",e[e.FadeIn=1]="FadeIn",e[e.FadeOut=2]="FadeOut",e}({});const E=e=>{switch(e){case v.None:return"";case v.FadeIn:return"fade-in";case v.FadeOut:return"fade-out"}};let S=function(e){return e[e.Prepare=0]="Prepare",e[e.InProgress=1]="InProgress",e[e.Done=2]="Done",e}({});const C={content:n=>{let{service:r,onDone:a}=n;const[o,l]=(0,e.useState)(null);return e.default.createElement("div",{id:"import-content"},null===o?e.default.createElement("div",{id:"upload"},e.default.createElement(t.UploadTile,{acceptFiles:".json",firstLineLabel:"Drag & Drop .json here",secondLineLabel:"or",buttonLabel:"Browse",size:t.UploadTileSize.Full,onUpload:e=>{let[t]=e;t instanceof File&&l(t)}})):e.default.createElement(t.Stack,{align:t.LayoutAlignment.Center,spacing:t.Spacing.L},e.default.createElement(t.ActionTile,{icon:"xp-arrow-enter-square",type:t.ActionTileType.Dashboard,buttonType:t.ButtonType.Submit,label:"IMPORT",onClick:()=>{r.upload(o),a()}}),e.default.createElement(t.Button,{size:t.ButtonSize.S,color:t.ButtonColor.Secondary,label:"BACK",onClick:e=>l(null)})))},hasBackground:!0},T={content:t=>{let{service:n,onDone:r}=t;const[a,o]=(0,e.useState)(0);return(0,e.useEffect)((()=>{n.observe((()=>{n.result()?(o(100),r()):o(n.progress())}))}),[]),e.default.createElement(e.default.Fragment,null,e.default.createElement("svg",{id:"svg-spinner",xmlns:"http://www.w3.org/2000/svg",viewBox:"-150 -150 300 300",style:{width:"300",height:"300",gridColumn:1,gridRow:1}},[...Array(13).keys()].map((t=>e.default.createElement("circle",{key:`circle-${t}`,style:{animationDelay:1*t+"s"},className:"progress-circle",cx:85*Math.sin(2*Math.PI/12*t),cy:85*Math.cos(2*Math.PI/12*t),r:5,fill:"rgb(103,56,140)"},e.default.createElement("animate",{attributeName:"r",from:"5",to:"5",begin:""+-t/13*1,dur:"1",values:"8;14;8;8",keyTimes:"0;0.2;0.4;1",repeatCount:"indefinite"}))))),e.default.createElement("div",{style:{gridColumn:1,gridRow:1,textAlign:"center",color:"black"}},e.default.createElement("span",{style:{fontSize:45}},a," %"),e.default.createElement("br",null),e.default.createElement("span",{style:{fontSize:14}},"Upload progress")))},hasBackground:!0},k={content:n=>{let{service:r,onDone:a}=n;const[o,l]=(0,e.useState)(!1);return e.default.createElement("div",null,r.result()&&e.default.createElement(e.default.Fragment,null,e.default.createElement(t.Callout,{type:t.CalloutType.QuickTip,placement:t.CalloutPlacementType.OnPaper,headline:"Migration is done",subheadline:"Info"},"Successful imports:",e.default.createElement("table",{className:"import-log-table"},e.default.createElement("tbody",null,Object.entries(r.result().SuccessfulImports).map((t=>{let[n,r]=t;return e.default.createElement("tr",{key:n},e.default.createElement("td",null,"✅ ",n),e.default.createElement("td",null,r))})))),0!=r.result().Errors.length&&e.default.createElement(e.default.Fragment,null,e.default.createElement("br",null),"⚠ There were some problems:",e.default.createElement("br",null)," ",!o&&e.default.createElement(t.LinkButton,{label:"View ...",size:t.ButtonSize.S,onClick:e=>l(!0)}),o&&e.default.createElement("table",{className:"import-log-table"},e.default.createElement("tbody",null,r.result().Errors.map(((t,n)=>e.default.createElement("tr",{key:n},e.default.createElement("td",null,'Object "',t.ObjectId,'"'),e.default.createElement("td",null,t.Description)))))))),e.default.createElement(t.Button,{className:"start-again-button",label:"START AGAIN",onClick:a})))},hasBackground:!1},x={[S.Prepare]:C,[S.InProgress]:T,[S.Done]:k},w={[S.Prepare]:S.InProgress,[S.InProgress]:S.Done,[S.Done]:S.Prepare},B=new class{canContinue=!0;toofast=!1;async upload(e){const t=this;if(this.setProgress(0),this.setResult(void 0),null!=e){console.log(e);let n=""!=location.port?`:${location.port}`:"";const r=new WebSocket("ws://"+location.hostname+`${n}/umtsample/ws`);r.binaryType="blob",r.onerror=e=>{console.log("error occured",e),t.canContinue=!1,console.log("closing socket => error"),r.close()},r.onmessage=n=>{var a=JSON.parse(n.data);switch(a.type){case"stats":try{t.setResult(JSON.parse(a.payload))}catch(e){console.error(e)}break;case"headerConfirmed":console.log("header confirmed, starting import"),t.parseFile(e,(e=>r.readyState==r.OPEN&&(r.send(e),!0)),(()=>{console.log("sending end sequence");var e=Uint8Array.of(45,45,45,45,45);r.send(e),setTimeout((()=>{console.log("closing socket - timeout 60s"),r.close()}),6e4)}));break;case"toofast":t.toofast=!0;break;case"msg":break;case"progress":{const e=parseInt(a.payload);t.setProgress(e);break}case"finished":console.log("closing socket"),t.canContinue=!1,r.readyState<r.CLOSING&&r.close()}},r.onopen=function(n){t.canContinue=!0,t.setProgress(0),document.getElementById("import-content")?.classList.add("hidden"),r.send(JSON.stringify({type:"header",payload:{byteSize:e.size}}))}}else alert("no file selected")}parseFile(e,t,n){var r=e.size,a=32768,o=0,l=null;const s=this;var i=function(i){if(s.canContinue)if(null!=i.target){if(null!=i.target.error||null==i.target.result)return n(),void console.log("Read error: "+i.target.error);if(o+=a,t(i.target.result))return o>=r?(n(),void console.log("Done reading file")):void(null!=l&&s.canContinue&&l(o,a,e))}else console.log("progress is null")};(l=function(e,t,n){var r=new FileReader,a=n.slice(e,t+e);r.onload=i,s.toofast?(setTimeout((()=>{r.readAsText(a)}),3e3),console.log("too fast => wait 3s"),s.toofast=!1):r.readAsText(a)})(o,a,e)}_progress=0;setProgress(e){this._progress=e,this.updateObservers()}progress(){return this._progress}result(){return this._result}setResult(e){this._result=e,this.updateObservers()}observers=[];observe(e){this.observers.push(e)}updateObservers(){for(const e of this.observers)e()}},P=n=>{let{label:r}=n;const[a,o]=(0,e.useState)(S.Prepare),[l,s]=(0,e.useState)(v.None),[i,c]=(0,e.useState)(v.None),u=t=>e.default.createElement(t.content,{service:B,onDone:()=>(e=>{const t=x[e];s(v.FadeOut),d.hasBackground!=t.hasBackground&&c(v.FadeOut),setTimeout((()=>{o(e),s(v.FadeIn),c(v.FadeIn)}),500)})(w[a])}),d=x[a];return e.default.createElement(t.Box,{spacing:t.Spacing.M},e.default.createElement(t.Headline,{size:t.HeadlineSize.L,spacingBottom:t.Spacing.M},r),e.default.createElement(t.Row,{spacing:t.Spacing.XL},e.default.createElement(t.Column,{cols:t.Cols.Col12,colsMd:t.Cols.Col10,colsLg:t.Cols.Col8,order:t.Cols.Col2,orderLg:t.Cols.Col1},e.default.createElement(t.Stack,{spacing:t.Spacing.XL,fullHeight:!0},e.default.createElement(t.Callout,{type:t.CalloutType.QuickTip,placement:t.CalloutPlacementType.OnPaper,headline:"Basic usage",subheadline:"Info"},"Component ",e.default.createElement("a",{target:"_blank",href:"https://github.com/Kentico/xperience-by-kentico-universal-migration-toolkit/blob/main/docs/README.md"},"documentation")," and ",e.default.createElement("a",{target:"_blank",href:"https://github.com/Kentico/xperience-by-kentico-universal-migration-toolkit/tree/main/docs/Samples"},"samples")),e.default.createElement("div",{className:E(i)},d.hasBackground?e.default.createElement(b,null,e.default.createElement("div",{className:`content-container ${E(l)}`,style:{display:"grid",justifyContent:"center",alignItems:"center",width:"300",height:"300"}},u(d))):e.default.createElement("div",{className:E(i)},!d.hasBackground&&u(d)))))))}})(),l})())}}}));