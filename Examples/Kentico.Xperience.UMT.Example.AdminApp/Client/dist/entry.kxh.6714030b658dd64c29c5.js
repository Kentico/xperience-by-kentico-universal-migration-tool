System.register(["react","@kentico/xperience-admin-components"],(function(e,t){var o={},r={};return{setters:[function(e){o.default=e.default,o.useState=e.useState},function(e){r.Button=e.Button,r.ButtonSize=e.ButtonSize}],execute:function(){e((()=>{var e={722:(e,t,o)=>{const r=o(905).R;t.s=function(e){if(e||(e=1),!o.y.meta||!o.y.meta.url)throw console.error("__system_context__",o.y),Error("systemjs-webpack-interop was provided an unknown SystemJS context. Expected context.meta.url, but none was provided");o.p=r(o.y.meta.url,e)}},905:(e,t,o)=>{t.R=function(e,t){var o=document.createElement("a");o.href=e;for(var r="/"===o.pathname[0]?o.pathname:"/"+o.pathname,n=0,l=r.length;n!==t&&l>=0;)"/"===r[--l]&&n++;if(n!==t)throw Error("systemjs-webpack-interop: rootDirectoryLevel ("+t+") is greater than the number of directories ("+n+") in the URL path "+e);var a=r.slice(0,l+1);return o.protocol+"//"+o.host+a};Number.isInteger},271:e=>{"use strict";e.exports=r},954:e=>{"use strict";e.exports=o}},n={};function l(t){var o=n[t];if(void 0!==o)return o.exports;var r=n[t]={exports:{}};return e[t](r,r.exports,l),r.exports}l.y=t,l.d=(e,t)=>{for(var o in t)l.o(t,o)&&!l.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.p="";var a={};return(0,l(722).s)(1),(()=>{"use strict";l.r(a),l.d(a,{CustomLayoutTemplate:()=>n});var e=l(954),t=l(271);let o=!0,r=!1;const n=n=>{let{label:l,contactGroups:a}=n;const[s,c]=(0,e.useState)(l),[i,u]=(0,e.useState)(null),[d,p]=(0,e.useState)([]),[f,g]=(0,e.useState)({current:0,total:0});return e.default.createElement("div",null,e.default.createElement("h1",null,s),e.default.createElement("input",{type:"file",onChange:e=>null!=e.target.files?u(e.target.files[0]||null):null}),e.default.createElement("pre",{style:{border:"2px dotted magenta"}},`Upload progress:${Math.floor(f.current/f.total*100)}%\n`,e.default.createElement("progress",{id:"progress_",value:f.current,max:f.total,style:{width:"100%"}})),e.default.createElement(t.Button,{label:"Send file",size:t.ButtonSize.S,onClick:()=>{if(null!=i){console.log(i);let e=""!=location.port?`:${location.port}`:"";const t=new WebSocket("ws://"+location.hostname+`${e}/umtsample/ws`);t.binaryType="blob",t.onerror=e=>{console.log("error occured",e),o=!1,console.log("closing socket => error"),t.close()},t.onmessage=e=>{var n=JSON.parse(e.data);switch(n.type){case"headerConfirmed":console.log("header confirmed, starting import"),function(e,n,l){var a=e.size,s=32768,c=0,i=null,u=function(r){if(o)if(null!=r.target){if(null!=r.target.error||null==r.target.result)return l(),void console.log("Read error: "+r.target.error);if(c+=s,n=r.target.result,t.readyState==t.OPEN&&(t.send(n),1))return c>=a?(l(),void console.log("Done reading file")):void(null!=i&&o&&i(c,s,e))}else console.log("progress is null");var n};(i=function(e,t,o){var n=new FileReader,l=o.slice(e,t+e);n.onload=u,r?(setTimeout((()=>{n.readAsText(l)}),3e3),console.log("too fast => wait 3s"),r=!1):n.readAsText(l)})(c,s,e)}(i,0,(()=>{console.log("sending end sequence");var e=Uint8Array.of(45,45,45,45,45);t.send(e),setTimeout((()=>{console.log("closing socket - timeout 60s"),t.close()}),6e4)}));break;case"toofast":r=!0;break;case"msg":p((e=>[...e,n.payload]));break;case"progress":{const e=parseInt(n.payload);g((t=>({total:t.total,current:t.current+e})));break}case"finished":console.log("closing socket"),o=!1,t.readyState<t.CLOSING&&t.close()}},t.onopen=function(e){o=!0,p((e=>[...e,`Sending file of length: ${i.size}`])),console.log("connected"),g({total:i.size,current:0}),t.send(JSON.stringify({type:"header",payload:{}}))}}else alert("no file selected")}}),e.default.createElement("pre",{style:{overflow:"scroll"}},[...d].reverse().join("\r\n")))}})(),a})())}}}));